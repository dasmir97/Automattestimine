import org.json.simple.parser.ParseException;
import org.junit.Before;
import org.junit.Test;

import java.io.BufferedReader;
import java.io.FileInputStream;
import java.io.IOException;

import static org.junit.jupiter.api.Assertions.assertEquals;
import static org.junit.jupiter.api.Assertions.assertThrows;
import static org.junit.jupiter.api.Assertions.fail;
import static org.mockito.Mockito.mock;
import static org.mockito.Mockito.when;

public class UpdateWeatherTaskTest {

	private static final String TALLINN_CURRENT_WEATHER_RESPONSE = "{\"coord\":{\"lon\":24.75,\"lat\":59.44},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"base\":\"stations\",\"main\":{\"temp\":1,\"pressure\":1008,\"humidity\":80,\"temp_min\":1,\"temp_max\":1},\"visibility\":10000,\"wind\":{\"speed\":5.1,\"deg\":150},\"clouds\":{\"all\":90},\"dt\":1511904000,\"sys\":{\"type\":1,\"id\":5014,\"message\":0.0029,\"country\":\"EE\",\"sunrise\":1511851645,\"sunset\":1511875845},\"id\":588409,\"name\":\"Tallinn\",\"cod\":200}";
	private static final String TALLINN_FORECAST_RESPONSE = "{\"cod\":\"200\",\"message\":0.0025,\"cnt\":39,\"list\":[{\"dt\":1512356400,\"main\":{\"temp\":-1.7,\"temp_min\":-1.7,\"temp_max\":-0.81,\"pressure\":1012.33,\"sea_level\":1015.9,\"grnd_level\":1012.33,\"humidity\":100,\"temp_kf\":-0.9},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":2.71,\"deg\":301},\"rain\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-04 03:00:00\"},{\"dt\":1512367200,\"main\":{\"temp\":-1.49,\"temp_min\":-1.49,\"temp_max\":-0.82,\"pressure\":1012.46,\"sea_level\":1016.15,\"grnd_level\":1012.46,\"humidity\":100,\"temp_kf\":-0.67},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":24},\"wind\":{\"speed\":3.2,\"deg\":311.507},\"rain\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-04 06:00:00\"},{\"dt\":1512378000,\"main\":{\"temp\":0.71,\"temp_min\":0.71,\"temp_max\":1.16,\"pressure\":1013.42,\"sea_level\":1016.95,\"grnd_level\":1013.42,\"humidity\":100,\"temp_kf\":-0.45},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":76},\"wind\":{\"speed\":4.29,\"deg\":343.003},\"rain\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-04 09:00:00\"},{\"dt\":1512388800,\"main\":{\"temp\":0.86,\"temp_min\":0.86,\"temp_max\":1.09,\"pressure\":1013.77,\"sea_level\":1017.29,\"grnd_level\":1013.77,\"humidity\":100,\"temp_kf\":-0.22},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":80},\"wind\":{\"speed\":4.67,\"deg\":348.001},\"rain\":{},\"snow\":{\"3h\":0.005},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-04 12:00:00\"},{\"dt\":1512399600,\"main\":{\"temp\":0.7,\"temp_min\":0.7,\"temp_max\":0.7,\"pressure\":1015.13,\"sea_level\":1018.78,\"grnd_level\":1015.13,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":64},\"wind\":{\"speed\":5.4,\"deg\":358.507},\"rain\":{},\"snow\":{\"3h\":0.02},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-04 15:00:00\"},{\"dt\":1512410400,\"main\":{\"temp\":0.23,\"temp_min\":0.23,\"temp_max\":0.23,\"pressure\":1016.67,\"sea_level\":1020.28,\"grnd_level\":1016.67,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":64},\"wind\":{\"speed\":5.17,\"deg\":349.503},\"rain\":{},\"snow\":{\"3h\":0.0025},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-04 18:00:00\"},{\"dt\":1512421200,\"main\":{\"temp\":0.3,\"temp_min\":0.3,\"temp_max\":0.3,\"pressure\":1017.24,\"sea_level\":1020.91,\"grnd_level\":1017.24,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":44},\"wind\":{\"speed\":4.96,\"deg\":334.001},\"rain\":{},\"snow\":{\"3h\":0.0075},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-04 21:00:00\"},{\"dt\":1512432000,\"main\":{\"temp\":-1.22,\"temp_min\":-1.22,\"temp_max\":-1.22,\"pressure\":1017.9,\"sea_level\":1021.53,\"grnd_level\":1017.9,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":4.66,\"deg\":314.502},\"rain\":{},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 00:00:00\"},{\"dt\":1512442800,\"main\":{\"temp\":-1.63,\"temp_min\":-1.63,\"temp_max\":-1.63,\"pressure\":1017.87,\"sea_level\":1021.51,\"grnd_level\":1017.87,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":56},\"wind\":{\"speed\":4.31,\"deg\":291.001},\"rain\":{},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 03:00:00\"},{\"dt\":1512453600,\"main\":{\"temp\":1.8,\"temp_min\":1.8,\"temp_max\":1.8,\"pressure\":1017.41,\"sea_level\":1021.05,\"grnd_level\":1017.41,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":36},\"wind\":{\"speed\":5.62,\"deg\":306.002},\"rain\":{\"3h\":0.069999999999999},\"snow\":{\"3h\":0.03},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 06:00:00\"},{\"dt\":1512464400,\"main\":{\"temp\":1.46,\"temp_min\":1.46,\"temp_max\":1.46,\"pressure\":1017.02,\"sea_level\":1020.56,\"grnd_level\":1017.02,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":48},\"wind\":{\"speed\":4.08,\"deg\":283.006},\"rain\":{\"3h\":0.0099999999999998},\"snow\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-05 09:00:00\"},{\"dt\":1512475200,\"main\":{\"temp\":2.24,\"temp_min\":2.24,\"temp_max\":2.24,\"pressure\":1014.74,\"sea_level\":1018.31,\"grnd_level\":1014.74,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":88},\"wind\":{\"speed\":4.36,\"deg\":230.001},\"rain\":{\"3h\":0.15},\"snow\":{\"3h\":0.0275},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-05 12:00:00\"},{\"dt\":1512486000,\"main\":{\"temp\":1.5,\"temp_min\":1.5,\"temp_max\":1.5,\"pressure\":1011.53,\"sea_level\":1015.08,\"grnd_level\":1011.53,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":6.31,\"deg\":216.501},\"rain\":{\"3h\":0.61},\"snow\":{\"3h\":0.2025},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 15:00:00\"},{\"dt\":1512496800,\"main\":{\"temp\":1.45,\"temp_min\":1.45,\"temp_max\":1.45,\"pressure\":1006.38,\"sea_level\":1010.02,\"grnd_level\":1006.38,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":7.19,\"deg\":213.002},\"rain\":{\"3h\":0.77},\"snow\":{\"3h\":1.215},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 18:00:00\"},{\"dt\":1512507600,\"main\":{\"temp\":2.31,\"temp_min\":2.31,\"temp_max\":2.31,\"pressure\":1005.88,\"sea_level\":1009.39,\"grnd_level\":1005.88,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":44},\"wind\":{\"speed\":9.71,\"deg\":307.005},\"rain\":{\"3h\":0.049999999999999},\"snow\":{\"3h\":0.0049999999999999},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 21:00:00\"},{\"dt\":1512518400,\"main\":{\"temp\":1.45,\"temp_min\":1.45,\"temp_max\":1.45,\"pressure\":1008.11,\"sea_level\":1011.68,\"grnd_level\":1008.11,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":12},\"wind\":{\"speed\":7.96,\"deg\":337.503},\"rain\":{},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 00:00:00\"},{\"dt\":1512529200,\"main\":{\"temp\":0.07,\"temp_min\":0.07,\"temp_max\":0.07,\"pressure\":1010.32,\"sea_level\":1013.92,\"grnd_level\":1010.32,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":6.02,\"deg\":331},\"rain\":{},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 03:00:00\"},{\"dt\":1512540000,\"main\":{\"temp\":-1.26,\"temp_min\":-1.26,\"temp_max\":-1.26,\"pressure\":1011.42,\"sea_level\":1014.93,\"grnd_level\":1011.42,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":4.14,\"deg\":305.001},\"rain\":{},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 06:00:00\"},{\"dt\":1512550800,\"main\":{\"temp\":0.05,\"temp_min\":0.05,\"temp_max\":0.05,\"pressure\":1011.84,\"sea_level\":1015.42,\"grnd_level\":1011.84,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":2.81,\"deg\":271.503},\"rain\":{\"3h\":0.010000000000002},\"snow\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-06 09:00:00\"},{\"dt\":1512561600,\"main\":{\"temp\":2.14,\"temp_min\":2.14,\"temp_max\":2.14,\"pressure\":1011.44,\"sea_level\":1015.05,\"grnd_level\":1011.44,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":2.81,\"deg\":246.5},\"rain\":{\"3h\":0.039999999999999},\"snow\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-06 12:00:00\"},{\"dt\":1512572400,\"main\":{\"temp\":0.53,\"temp_min\":0.53,\"temp_max\":0.53,\"pressure\":1010.81,\"sea_level\":1014.39,\"grnd_level\":1010.81,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":1.56,\"deg\":200.002},\"rain\":{\"3h\":0.029999999999999},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 15:00:00\"},{\"dt\":1512583200,\"main\":{\"temp\":0.55,\"temp_min\":0.55,\"temp_max\":0.55,\"pressure\":1009.72,\"sea_level\":1013.31,\"grnd_level\":1009.72,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":5.08,\"deg\":180.001},\"rain\":{\"3h\":0.13},\"snow\":{\"3h\":0.025},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 18:00:00\"},{\"dt\":1512594000,\"main\":{\"temp\":0.29,\"temp_min\":0.29,\"temp_max\":0.29,\"pressure\":1007.55,\"sea_level\":1011.1,\"grnd_level\":1007.55,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":80},\"wind\":{\"speed\":5.63,\"deg\":157.506},\"rain\":{\"3h\":0.1},\"snow\":{\"3h\":0.4},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 21:00:00\"},{\"dt\":1512604800,\"main\":{\"temp\":0.35,\"temp_min\":0.35,\"temp_max\":0.35,\"pressure\":1003.09,\"sea_level\":1006.62,\"grnd_level\":1003.09,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":8.54,\"deg\":135.001},\"rain\":{\"3h\":0.0099999999999998},\"snow\":{\"3h\":1.37},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 00:00:00\"},{\"dt\":1512615600,\"main\":{\"temp\":2.79,\"temp_min\":2.79,\"temp_max\":2.79,\"pressure\":998.56,\"sea_level\":1002.23,\"grnd_level\":998.56,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":501,\"main\":\"Rain\",\"description\":\"moderate rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":6.56,\"deg\":196.004},\"rain\":{\"3h\":3.46},\"snow\":{\"3h\":0.23},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 03:00:00\"},{\"dt\":1512626400,\"main\":{\"temp\":5.3,\"temp_min\":5.3,\"temp_max\":5.3,\"pressure\":996.94,\"sea_level\":1000.46,\"grnd_level\":996.94,\"humidity\":91,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":9.02,\"deg\":241},\"rain\":{\"3h\":2.29},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 06:00:00\"},{\"dt\":1512637200,\"main\":{\"temp\":5.74,\"temp_min\":5.74,\"temp_max\":5.74,\"pressure\":995.53,\"sea_level\":998.95,\"grnd_level\":995.53,\"humidity\":93,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":9.5,\"deg\":228.505},\"rain\":{\"3h\":1.61},\"snow\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-07 09:00:00\"},{\"dt\":1512648000,\"main\":{\"temp\":6.01,\"temp_min\":6.01,\"temp_max\":6.01,\"pressure\":994.31,\"sea_level\":997.77,\"grnd_level\":994.31,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":11.45,\"deg\":228.504},\"rain\":{\"3h\":2.09},\"snow\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-07 12:00:00\"},{\"dt\":1512658800,\"main\":{\"temp\":5.9,\"temp_min\":5.9,\"temp_max\":5.9,\"pressure\":993.63,\"sea_level\":997.06,\"grnd_level\":993.63,\"humidity\":94,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":12.41,\"deg\":225.502},\"rain\":{\"3h\":0.77},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 15:00:00\"},{\"dt\":1512669600,\"main\":{\"temp\":5.59,\"temp_min\":5.59,\"temp_max\":5.59,\"pressure\":992.69,\"sea_level\":996.17,\"grnd_level\":992.69,\"humidity\":96,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":12.46,\"deg\":219.502},\"rain\":{\"3h\":0.54},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 18:00:00\"},{\"dt\":1512680400,\"main\":{\"temp\":5.64,\"temp_min\":5.64,\"temp_max\":5.64,\"pressure\":992.19,\"sea_level\":995.72,\"grnd_level\":992.19,\"humidity\":97,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":12.61,\"deg\":218.5},\"rain\":{\"3h\":0.72},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 21:00:00\"},{\"dt\":1512691200,\"main\":{\"temp\":5.85,\"temp_min\":5.85,\"temp_max\":5.85,\"pressure\":991.91,\"sea_level\":995.48,\"grnd_level\":991.91,\"humidity\":96,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":12.24,\"deg\":218.003},\"rain\":{\"3h\":0.95},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 00:00:00\"},{\"dt\":1512702000,\"main\":{\"temp\":5.84,\"temp_min\":5.84,\"temp_max\":5.84,\"pressure\":992.5,\"sea_level\":996.11,\"grnd_level\":992.5,\"humidity\":97,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":10.15,\"deg\":227.003},\"rain\":{\"3h\":1.61},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 03:00:00\"},{\"dt\":1512712800,\"main\":{\"temp\":3.95,\"temp_min\":3.95,\"temp_max\":3.95,\"pressure\":995.45,\"sea_level\":998.89,\"grnd_level\":995.45,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":32},\"wind\":{\"speed\":7.91,\"deg\":252.51},\"rain\":{\"3h\":0.37},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 06:00:00\"},{\"dt\":1512723600,\"main\":{\"temp\":2.35,\"temp_min\":2.35,\"temp_max\":2.35,\"pressure\":999.15,\"sea_level\":1002.8,\"grnd_level\":999.15,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03d\"}],\"clouds\":{\"all\":32},\"wind\":{\"speed\":7.54,\"deg\":250},\"rain\":{},\"snow\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-08 09:00:00\"},{\"dt\":1512734400,\"main\":{\"temp\":2.41,\"temp_min\":2.41,\"temp_max\":2.41,\"pressure\":1002.09,\"sea_level\":1005.61,\"grnd_level\":1002.09,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04d\"}],\"clouds\":{\"all\":80},\"wind\":{\"speed\":6.83,\"deg\":253.505},\"rain\":{},\"snow\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-08 12:00:00\"},{\"dt\":1512745200,\"main\":{\"temp\":1.77,\"temp_min\":1.77,\"temp_max\":1.77,\"pressure\":1005.13,\"sea_level\":1008.77,\"grnd_level\":1005.13,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":80},\"wind\":{\"speed\":6.38,\"deg\":257.001},\"rain\":{\"3h\":0.009999999999998},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 15:00:00\"},{\"dt\":1512756000,\"main\":{\"temp\":1.46,\"temp_min\":1.46,\"temp_max\":1.46,\"pressure\":1008.57,\"sea_level\":1012.19,\"grnd_level\":1008.57,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":88},\"wind\":{\"speed\":6.67,\"deg\":257},\"rain\":{\"3h\":0.050000000000001},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 18:00:00\"},{\"dt\":1512766800,\"main\":{\"temp\":1.21,\"temp_min\":1.21,\"temp_max\":1.21,\"pressure\":1011.8,\"sea_level\":1015.42,\"grnd_level\":1011.8,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":76},\"wind\":{\"speed\":6.91,\"deg\":247.503},\"rain\":{\"3h\":0.010000000000002},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 21:00:00\"}],\"city\":{\"id\":588409,\"name\":\"Tallinn\",\"coord\":{\"lat\":59.437,\"lon\":24.7535},\"country\":\"EE\"}}";
	private static final String TARTU_CURRENT_WEATHER_RESPONSE = "{\"coord\":{\"lon\":26.73,\"lat\":58.38},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"base\":\"stations\",\"main\":{\"temp\":-0.05,\"pressure\":1017.2,\"humidity\":88,\"temp_min\":-0.05,\"temp_max\":-0.05,\"sea_level\":1025.68,\"grnd_level\":1017.2},\"wind\":{\"speed\":6.96,\"deg\":170.502},\"clouds\":{\"all\":92},\"dt\":1511909072,\"sys\":{\"message\":0.0036,\"country\":\"EE\",\"sunrise\":1511850704,\"sunset\":1511875836},\"id\":588335,\"name\":\"Tartu\",\"cod\":200}";
	private static final String TARTU_FORECAST_RESPONSE = "{\"cod\":\"200\",\"message\":0.0036,\"cnt\":39,\"list\":[{\"dt\":1512356400,\"main\":{\"temp\":-1.36,\"temp_min\":-1.36,\"temp_max\":-1.29,\"pressure\":1010.14,\"sea_level\":1018.58,\"grnd_level\":1010.14,\"humidity\":90,\"temp_kf\":-0.08},\"weather\":[{\"id\":600,\"main\":\"Snow\",\"description\":\"light snow\",\"icon\":\"13n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":7.21,\"deg\":216},\"rain\":{},\"snow\":{\"3h\":0.52},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-04 03:00:00\"},{\"dt\":1512367200,\"main\":{\"temp\":-1.48,\"temp_min\":-1.48,\"temp_max\":-1.42,\"pressure\":1008.89,\"sea_level\":1017.44,\"grnd_level\":1008.89,\"humidity\":91,\"temp_kf\":-0.06},\"weather\":[{\"id\":600,\"main\":\"Snow\",\"description\":\"light snow\",\"icon\":\"13n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":5.27,\"deg\":218.507},\"rain\":{},\"snow\":{\"3h\":1.08625},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-04 06:00:00\"},{\"dt\":1512378000,\"main\":{\"temp\":-1.07,\"temp_min\":-1.07,\"temp_max\":-1.02,\"pressure\":1008.31,\"sea_level\":1016.83,\"grnd_level\":1008.31,\"humidity\":94,\"temp_kf\":-0.04},\"weather\":[{\"id\":600,\"main\":\"Snow\",\"description\":\"light snow\",\"icon\":\"13d\"}],\"clouds\":{\"all\":100},\"wind\":{\"speed\":3.96,\"deg\":219.503},\"rain\":{},\"snow\":{\"3h\":1.26625},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-04 09:00:00\"},{\"dt\":1512388800,\"main\":{\"temp\":0.42,\"temp_min\":0.42,\"temp_max\":0.44,\"pressure\":1007.6,\"sea_level\":1016.16,\"grnd_level\":1007.6,\"humidity\":94,\"temp_kf\":-0.02},\"weather\":[{\"id\":600,\"main\":\"Snow\",\"description\":\"light snow\",\"icon\":\"13d\"}],\"clouds\":{\"all\":88},\"wind\":{\"speed\":2.37,\"deg\":288.501},\"rain\":{},\"snow\":{\"3h\":0.175},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-04 12:00:00\"},{\"dt\":1512399600,\"main\":{\"temp\":0.38,\"temp_min\":0.38,\"temp_max\":0.38,\"pressure\":1008.56,\"sea_level\":1016.92,\"grnd_level\":1008.56,\"humidity\":98,\"temp_kf\":0},\"weather\":[{\"id\":600,\"main\":\"Snow\",\"description\":\"light snow\",\"icon\":\"13n\"}],\"clouds\":{\"all\":80},\"wind\":{\"speed\":3.28,\"deg\":317.007},\"rain\":{},\"snow\":{\"3h\":0.1175},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-04 15:00:00\"},{\"dt\":1512410400,\"main\":{\"temp\":-0.78,\"temp_min\":-0.78,\"temp_max\":-0.78,\"pressure\":1009.86,\"sea_level\":1018.3,\"grnd_level\":1009.86,\"humidity\":89,\"temp_kf\":0},\"weather\":[{\"id\":600,\"main\":\"Snow\",\"description\":\"light snow\",\"icon\":\"13n\"}],\"clouds\":{\"all\":80},\"wind\":{\"speed\":4.17,\"deg\":324.003},\"rain\":{},\"snow\":{\"3h\":0.1325},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-04 18:00:00\"},{\"dt\":1512421200,\"main\":{\"temp\":-1.36,\"temp_min\":-1.36,\"temp_max\":-1.36,\"pressure\":1011.16,\"sea_level\":1019.65,\"grnd_level\":1011.16,\"humidity\":91,\"temp_kf\":0},\"weather\":[{\"id\":600,\"main\":\"Snow\",\"description\":\"light snow\",\"icon\":\"13n\"}],\"clouds\":{\"all\":80},\"wind\":{\"speed\":4.76,\"deg\":327.501},\"rain\":{},\"snow\":{\"3h\":0.11},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-04 21:00:00\"},{\"dt\":1512432000,\"main\":{\"temp\":-1.74,\"temp_min\":-1.74,\"temp_max\":-1.74,\"pressure\":1012.63,\"sea_level\":1021.08,\"grnd_level\":1012.63,\"humidity\":90,\"temp_kf\":0},\"weather\":[{\"id\":600,\"main\":\"Snow\",\"description\":\"light snow\",\"icon\":\"13n\"}],\"clouds\":{\"all\":80},\"wind\":{\"speed\":4.31,\"deg\":314.002},\"rain\":{},\"snow\":{\"3h\":0.0875},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 00:00:00\"},{\"dt\":1512442800,\"main\":{\"temp\":-1.45,\"temp_min\":-1.45,\"temp_max\":-1.45,\"pressure\":1013.66,\"sea_level\":1022.08,\"grnd_level\":1013.66,\"humidity\":91,\"temp_kf\":0},\"weather\":[{\"id\":600,\"main\":\"Snow\",\"description\":\"light snow\",\"icon\":\"13n\"}],\"clouds\":{\"all\":80},\"wind\":{\"speed\":4.41,\"deg\":298.001},\"rain\":{},\"snow\":{\"3h\":0.12},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 03:00:00\"},{\"dt\":1512453600,\"main\":{\"temp\":-3.76,\"temp_min\":-3.76,\"temp_max\":-3.76,\"pressure\":1013.85,\"sea_level\":1022.47,\"grnd_level\":1013.85,\"humidity\":84,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":3.29,\"deg\":266.502},\"rain\":{},\"snow\":{\"3h\":0.0099999999999998},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 06:00:00\"},{\"dt\":1512464400,\"main\":{\"temp\":-1.5,\"temp_min\":-1.5,\"temp_max\":-1.5,\"pressure\":1013.7,\"sea_level\":1022.26,\"grnd_level\":1013.7,\"humidity\":86,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":76},\"wind\":{\"speed\":4.76,\"deg\":249.506},\"rain\":{},\"snow\":{\"3h\":0.02},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-05 09:00:00\"},{\"dt\":1512475200,\"main\":{\"temp\":0.99,\"temp_min\":0.99,\"temp_max\":0.99,\"pressure\":1012.63,\"sea_level\":1021.06,\"grnd_level\":1012.63,\"humidity\":91,\"temp_kf\":0},\"weather\":[{\"id\":600,\"main\":\"Snow\",\"description\":\"light snow\",\"icon\":\"13d\"}],\"clouds\":{\"all\":48},\"wind\":{\"speed\":4.29,\"deg\":253.501},\"rain\":{},\"snow\":{\"3h\":0.0925},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-05 12:00:00\"},{\"dt\":1512486000,\"main\":{\"temp\":-0.49,\"temp_min\":-0.49,\"temp_max\":-0.49,\"pressure\":1010.64,\"sea_level\":1019.02,\"grnd_level\":1010.64,\"humidity\":96,\"temp_kf\":0},\"weather\":[{\"id\":600,\"main\":\"Snow\",\"description\":\"light snow\",\"icon\":\"13n\"}],\"clouds\":{\"all\":88},\"wind\":{\"speed\":4.64,\"deg\":224.501},\"rain\":{},\"snow\":{\"3h\":0.2725},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 15:00:00\"},{\"dt\":1512496800,\"main\":{\"temp\":0.45,\"temp_min\":0.45,\"temp_max\":0.45,\"pressure\":1007.19,\"sea_level\":1015.57,\"grnd_level\":1007.19,\"humidity\":94,\"temp_kf\":0},\"weather\":[{\"id\":600,\"main\":\"Snow\",\"description\":\"light snow\",\"icon\":\"13n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":6.44,\"deg\":221.002},\"rain\":{},\"snow\":{\"3h\":0.945},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 18:00:00\"},{\"dt\":1512507600,\"main\":{\"temp\":1.04,\"temp_min\":1.04,\"temp_max\":1.04,\"pressure\":1002.23,\"sea_level\":1010.64,\"grnd_level\":1002.23,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":8.16,\"deg\":225.005},\"rain\":{\"3h\":0.04},\"snow\":{\"3h\":2.365},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 21:00:00\"},{\"dt\":1512518400,\"main\":{\"temp\":1.58,\"temp_min\":1.58,\"temp_max\":1.58,\"pressure\":1001.47,\"sea_level\":1009.93,\"grnd_level\":1001.47,\"humidity\":91,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":76},\"wind\":{\"speed\":8.71,\"deg\":280.503},\"rain\":{\"3h\":0.12},\"snow\":{\"3h\":0.0049999999999999},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 00:00:00\"},{\"dt\":1512529200,\"main\":{\"temp\":0.49,\"temp_min\":0.49,\"temp_max\":0.49,\"pressure\":1003.35,\"sea_level\":1011.65,\"grnd_level\":1003.35,\"humidity\":89,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":88},\"wind\":{\"speed\":8.77,\"deg\":305.5},\"rain\":{},\"snow\":{\"3h\":0.02},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 03:00:00\"},{\"dt\":1512540000,\"main\":{\"temp\":-1.06,\"temp_min\":-1.06,\"temp_max\":-1.06,\"pressure\":1005.98,\"sea_level\":1014.41,\"grnd_level\":1005.98,\"humidity\":88,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":6.44,\"deg\":317.001},\"rain\":{},\"snow\":{\"3h\":0.0049999999999999},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 06:00:00\"},{\"dt\":1512550800,\"main\":{\"temp\":-3.2,\"temp_min\":-3.2,\"temp_max\":-3.2,\"pressure\":1008.03,\"sea_level\":1016.39,\"grnd_level\":1008.03,\"humidity\":90,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02d\"}],\"clouds\":{\"all\":12},\"wind\":{\"speed\":3.76,\"deg\":298.003},\"rain\":{},\"snow\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-06 09:00:00\"},{\"dt\":1512561600,\"main\":{\"temp\":-2.57,\"temp_min\":-2.57,\"temp_max\":-2.57,\"pressure\":1008.44,\"sea_level\":1016.92,\"grnd_level\":1008.44,\"humidity\":92,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03d\"}],\"clouds\":{\"all\":44},\"wind\":{\"speed\":2.86,\"deg\":249.5},\"rain\":{},\"snow\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-06 12:00:00\"},{\"dt\":1512572400,\"main\":{\"temp\":-5.03,\"temp_min\":-5.03,\"temp_max\":-5.03,\"pressure\":1008.13,\"sea_level\":1016.66,\"grnd_level\":1008.13,\"humidity\":88,\"temp_kf\":0},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":88},\"wind\":{\"speed\":1.36,\"deg\":169.002},\"rain\":{},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 15:00:00\"},{\"dt\":1512583200,\"main\":{\"temp\":-3.18,\"temp_min\":-3.18,\"temp_max\":-3.18,\"pressure\":1007.45,\"sea_level\":1015.9,\"grnd_level\":1007.45,\"humidity\":93,\"temp_kf\":0},\"weather\":[{\"id\":600,\"main\":\"Snow\",\"description\":\"light snow\",\"icon\":\"13n\"}],\"clouds\":{\"all\":80},\"wind\":{\"speed\":3.38,\"deg\":189.001},\"rain\":{},\"snow\":{\"3h\":0.035},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 18:00:00\"},{\"dt\":1512594000,\"main\":{\"temp\":-2.04,\"temp_min\":-2.04,\"temp_max\":-2.04,\"pressure\":1005.69,\"sea_level\":1014.1,\"grnd_level\":1005.69,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":600,\"main\":\"Snow\",\"description\":\"light snow\",\"icon\":\"13n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":3.96,\"deg\":158.006},\"rain\":{},\"snow\":{\"3h\":0.24},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 21:00:00\"},{\"dt\":1512604800,\"main\":{\"temp\":-1.4,\"temp_min\":-1.4,\"temp_max\":-1.4,\"pressure\":1002.44,\"sea_level\":1010.84,\"grnd_level\":1002.44,\"humidity\":96,\"temp_kf\":0},\"weather\":[{\"id\":600,\"main\":\"Snow\",\"description\":\"light snow\",\"icon\":\"13n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":6.22,\"deg\":143.001},\"rain\":{},\"snow\":{\"3h\":1.325},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 00:00:00\"},{\"dt\":1512615600,\"main\":{\"temp\":1.94,\"temp_min\":1.94,\"temp_max\":1.94,\"pressure\":998.48,\"sea_level\":1006.85,\"grnd_level\":998.48,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":5.39,\"deg\":189.504},\"rain\":{\"3h\":1.85},\"snow\":{\"3h\":0.07},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 03:00:00\"},{\"dt\":1512626400,\"main\":{\"temp\":4.2,\"temp_min\":4.2,\"temp_max\":4.2,\"pressure\":997.35,\"sea_level\":1005.57,\"grnd_level\":997.35,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":8.47,\"deg\":241.5},\"rain\":{\"3h\":1.07},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 06:00:00\"},{\"dt\":1512637200,\"main\":{\"temp\":4.34,\"temp_min\":4.34,\"temp_max\":4.34,\"pressure\":996.75,\"sea_level\":1005.07,\"grnd_level\":996.75,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":9.33,\"deg\":235.005},\"rain\":{\"3h\":1.11},\"snow\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-07 09:00:00\"},{\"dt\":1512648000,\"main\":{\"temp\":4.06,\"temp_min\":4.06,\"temp_max\":4.06,\"pressure\":996.34,\"sea_level\":1004.58,\"grnd_level\":996.34,\"humidity\":93,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":10.25,\"deg\":234.004},\"rain\":{\"3h\":0.98},\"snow\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-07 12:00:00\"},{\"dt\":1512658800,\"main\":{\"temp\":3.88,\"temp_min\":3.88,\"temp_max\":3.88,\"pressure\":996.06,\"sea_level\":1004.27,\"grnd_level\":996.06,\"humidity\":93,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":10.58,\"deg\":229.002},\"rain\":{\"3h\":0.45},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 15:00:00\"},{\"dt\":1512669600,\"main\":{\"temp\":3.19,\"temp_min\":3.19,\"temp_max\":3.19,\"pressure\":995.44,\"sea_level\":1003.74,\"grnd_level\":995.44,\"humidity\":93,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":10.26,\"deg\":223.002},\"rain\":{\"3h\":0.14},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 18:00:00\"},{\"dt\":1512680400,\"main\":{\"temp\":2.84,\"temp_min\":2.84,\"temp_max\":2.84,\"pressure\":995.19,\"sea_level\":1003.54,\"grnd_level\":995.19,\"humidity\":93,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":10.03,\"deg\":219.5},\"rain\":{\"3h\":0.21},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 21:00:00\"},{\"dt\":1512691200,\"main\":{\"temp\":2.75,\"temp_min\":2.75,\"temp_max\":2.75,\"pressure\":995.23,\"sea_level\":1003.51,\"grnd_level\":995.23,\"humidity\":92,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":9.86,\"deg\":216.503},\"rain\":{\"3h\":0.14},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 00:00:00\"},{\"dt\":1512702000,\"main\":{\"temp\":3.24,\"temp_min\":3.24,\"temp_max\":3.24,\"pressure\":995.25,\"sea_level\":1003.53,\"grnd_level\":995.25,\"humidity\":93,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":10.13,\"deg\":215.003},\"rain\":{\"3h\":0.25},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 03:00:00\"},{\"dt\":1512712800,\"main\":{\"temp\":3.6,\"temp_min\":3.6,\"temp_max\":3.6,\"pressure\":995.77,\"sea_level\":1004.04,\"grnd_level\":995.77,\"humidity\":90,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":10.78,\"deg\":216.01},\"rain\":{\"3h\":0.04},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 06:00:00\"},{\"dt\":1512723600,\"main\":{\"temp\":3.9,\"temp_min\":3.9,\"temp_max\":3.9,\"pressure\":997.94,\"sea_level\":1006.13,\"grnd_level\":997.94,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":10.14,\"deg\":219},\"rain\":{\"3h\":0.28},\"snow\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-08 09:00:00\"},{\"dt\":1512734400,\"main\":{\"temp\":3.71,\"temp_min\":3.71,\"temp_max\":3.71,\"pressure\":999.66,\"sea_level\":1008,\"grnd_level\":999.66,\"humidity\":94,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":8.13,\"deg\":222.005},\"rain\":{\"3h\":0.65},\"snow\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-08 12:00:00\"},{\"dt\":1512745200,\"main\":{\"temp\":2.75,\"temp_min\":2.75,\"temp_max\":2.75,\"pressure\":1002.3,\"sea_level\":1010.6,\"grnd_level\":1002.3,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":4.98,\"deg\":241.001},\"rain\":{\"3h\":1.61},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 15:00:00\"},{\"dt\":1512756000,\"main\":{\"temp\":0.41,\"temp_min\":0.41,\"temp_max\":0.41,\"pressure\":1005.98,\"sea_level\":1014.43,\"grnd_level\":1005.98,\"humidity\":87,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":3.77,\"deg\":247.5},\"rain\":{\"3h\":0.37},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 18:00:00\"},{\"dt\":1512766800,\"main\":{\"temp\":-1.72,\"temp_min\":-1.72,\"temp_max\":-1.72,\"pressure\":1010.26,\"sea_level\":1018.7,\"grnd_level\":1010.26,\"humidity\":90,\"temp_kf\":0},\"weather\":[{\"id\":803,\"main\":\"Clouds\",\"description\":\"broken clouds\",\"icon\":\"04n\"}],\"clouds\":{\"all\":68},\"wind\":{\"speed\":4.26,\"deg\":239.503},\"rain\":{},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 21:00:00\"}],\"city\":{\"id\":588335,\"name\":\"Tartu\",\"coord\":{\"lat\":58.3806,\"lon\":26.7251},\"country\":\"EE\"}}";
	private static final String LONDON_CURRENT_WEATHER_RESPONSE = "{\"coord\":{\"lon\":-0.13,\"lat\":51.51},\"weather\":[{\"id\":804,\"main\":\"Clouds\",\"description\":\"overcast clouds\",\"icon\":\"04n\"}],\"base\":\"stations\",\"main\":{\"temp\":3.74,\"pressure\":1008,\"humidity\":70,\"temp_min\":2,\"temp_max\":6},\"visibility\":10000,\"wind\":{\"speed\":4.1,\"deg\":280},\"clouds\":{\"all\":90},\"dt\":1511904000,\"sys\":{\"type\":1,\"id\":5091,\"message\":0.0132,\"country\":\"GB\",\"sunrise\":1511854867,\"sunset\":1511884576},\"id\":2643743,\"name\":\"London\",\"cod\":200}";
	private static final String LONDON_FORECAST_RESPONSE = "{\"cod\":\"200\",\"message\":0.0066,\"cnt\":39,\"list\":[{\"dt\":1512356400,\"main\":{\"temp\":4.4,\"temp_min\":0.62,\"temp_max\":4.4,\"pressure\":1036.4,\"sea_level\":1044.48,\"grnd_level\":1036.4,\"humidity\":100,\"temp_kf\":3.78},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":12},\"wind\":{\"speed\":2.66,\"deg\":299},\"rain\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-04 03:00:00\"},{\"dt\":1512367200,\"main\":{\"temp\":3.29,\"temp_min\":0.46,\"temp_max\":3.29,\"pressure\":1036.94,\"sea_level\":1044.88,\"grnd_level\":1036.94,\"humidity\":100,\"temp_kf\":2.84},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"02n\"}],\"clouds\":{\"all\":8},\"wind\":{\"speed\":2.92,\"deg\":293.507},\"rain\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-04 06:00:00\"},{\"dt\":1512378000,\"main\":{\"temp\":2.25,\"temp_min\":0.36,\"temp_max\":2.25,\"pressure\":1037.74,\"sea_level\":1045.72,\"grnd_level\":1037.74,\"humidity\":93,\"temp_kf\":1.89},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02d\"}],\"clouds\":{\"all\":20},\"wind\":{\"speed\":1.91,\"deg\":263.003},\"rain\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-04 09:00:00\"},{\"dt\":1512388800,\"main\":{\"temp\":7.88,\"temp_min\":6.94,\"temp_max\":7.88,\"pressure\":1038.33,\"sea_level\":1046.19,\"grnd_level\":1038.33,\"humidity\":93,\"temp_kf\":0.95},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":88},\"wind\":{\"speed\":2.82,\"deg\":301.001},\"rain\":{\"3h\":0.06},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-04 12:00:00\"},{\"dt\":1512399600,\"main\":{\"temp\":8.25,\"temp_min\":8.25,\"temp_max\":8.25,\"pressure\":1038.64,\"sea_level\":1046.55,\"grnd_level\":1038.64,\"humidity\":89,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":3.05,\"deg\":309.007},\"rain\":{\"3h\":0.14},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-04 15:00:00\"},{\"dt\":1512410400,\"main\":{\"temp\":7.68,\"temp_min\":7.68,\"temp_max\":7.68,\"pressure\":1039.78,\"sea_level\":1047.52,\"grnd_level\":1039.78,\"humidity\":95,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":2.72,\"deg\":306.003},\"rain\":{\"3h\":0.13},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-04 18:00:00\"},{\"dt\":1512421200,\"main\":{\"temp\":7.17,\"temp_min\":7.17,\"temp_max\":7.17,\"pressure\":1040.59,\"sea_level\":1048.47,\"grnd_level\":1040.59,\"humidity\":96,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":2.96,\"deg\":306.501},\"rain\":{\"3h\":0.03},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-04 21:00:00\"},{\"dt\":1512432000,\"main\":{\"temp\":5.16,\"temp_min\":5.16,\"temp_max\":5.16,\"pressure\":1041.25,\"sea_level\":1049.05,\"grnd_level\":1041.25,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":32},\"wind\":{\"speed\":2.71,\"deg\":285.502},\"rain\":{\"3h\":0.03},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 00:00:00\"},{\"dt\":1512442800,\"main\":{\"temp\":3.88,\"temp_min\":3.88,\"temp_max\":3.88,\"pressure\":1041.13,\"sea_level\":1049.11,\"grnd_level\":1041.13,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":32},\"wind\":{\"speed\":2.81,\"deg\":276.501},\"rain\":{\"3h\":0.03},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 03:00:00\"},{\"dt\":1512453600,\"main\":{\"temp\":4.3,\"temp_min\":4.3,\"temp_max\":4.3,\"pressure\":1040.84,\"sea_level\":1048.82,\"grnd_level\":1040.84,\"humidity\":96,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":88},\"wind\":{\"speed\":2.59,\"deg\":263.002},\"rain\":{\"3h\":0.04},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 06:00:00\"},{\"dt\":1512464400,\"main\":{\"temp\":4.71,\"temp_min\":4.71,\"temp_max\":4.71,\"pressure\":1041.09,\"sea_level\":1048.93,\"grnd_level\":1041.09,\"humidity\":99,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":32},\"wind\":{\"speed\":2.71,\"deg\":253.506},\"rain\":{\"3h\":0.06},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-05 09:00:00\"},{\"dt\":1512475200,\"main\":{\"temp\":6.74,\"temp_min\":6.74,\"temp_max\":6.74,\"pressure\":1040.52,\"sea_level\":1048.38,\"grnd_level\":1040.52,\"humidity\":91,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":80},\"wind\":{\"speed\":3.86,\"deg\":264.001},\"rain\":{\"3h\":0.06},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-05 12:00:00\"},{\"dt\":1512486000,\"main\":{\"temp\":7.12,\"temp_min\":7.12,\"temp_max\":7.12,\"pressure\":1039.02,\"sea_level\":1046.82,\"grnd_level\":1039.02,\"humidity\":87,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":88},\"wind\":{\"speed\":3.86,\"deg\":251.501},\"rain\":{\"3h\":0.06},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-05 15:00:00\"},{\"dt\":1512496800,\"main\":{\"temp\":5.63,\"temp_min\":5.63,\"temp_max\":5.63,\"pressure\":1037.99,\"sea_level\":1045.89,\"grnd_level\":1037.99,\"humidity\":87,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":3.91,\"deg\":242.002},\"rain\":{\"3h\":0.01},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 18:00:00\"},{\"dt\":1512507600,\"main\":{\"temp\":4.56,\"temp_min\":4.56,\"temp_max\":4.56,\"pressure\":1036.93,\"sea_level\":1044.73,\"grnd_level\":1036.93,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":801,\"main\":\"Clouds\",\"description\":\"few clouds\",\"icon\":\"02n\"}],\"clouds\":{\"all\":12},\"wind\":{\"speed\":4.31,\"deg\":238.005},\"rain\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-05 21:00:00\"},{\"dt\":1512518400,\"main\":{\"temp\":4.95,\"temp_min\":4.95,\"temp_max\":4.95,\"pressure\":1035.19,\"sea_level\":1043.09,\"grnd_level\":1035.19,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"02n\"}],\"clouds\":{\"all\":8},\"wind\":{\"speed\":4.66,\"deg\":239.503},\"rain\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 00:00:00\"},{\"dt\":1512529200,\"main\":{\"temp\":6.64,\"temp_min\":6.64,\"temp_max\":6.64,\"pressure\":1033.1,\"sea_level\":1040.99,\"grnd_level\":1033.1,\"humidity\":99,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":80},\"wind\":{\"speed\":4.77,\"deg\":233.5},\"rain\":{\"3h\":0.11},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 03:00:00\"},{\"dt\":1512540000,\"main\":{\"temp\":8.35,\"temp_min\":8.35,\"temp_max\":8.35,\"pressure\":1030.38,\"sea_level\":1038.16,\"grnd_level\":1030.38,\"humidity\":88,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":5.62,\"deg\":226.001},\"rain\":{\"3h\":0.07},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 06:00:00\"},{\"dt\":1512550800,\"main\":{\"temp\":8.98,\"temp_min\":8.98,\"temp_max\":8.98,\"pressure\":1028.37,\"sea_level\":1036.13,\"grnd_level\":1028.37,\"humidity\":84,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":6.78,\"deg\":223.503},\"rain\":{\"3h\":0.08},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-06 09:00:00\"},{\"dt\":1512561600,\"main\":{\"temp\":10.16,\"temp_min\":10.16,\"temp_max\":10.16,\"pressure\":1025.54,\"sea_level\":1033.25,\"grnd_level\":1025.54,\"humidity\":82,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":88},\"wind\":{\"speed\":7.58,\"deg\":221.5},\"rain\":{\"3h\":0.13},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-06 12:00:00\"},{\"dt\":1512572400,\"main\":{\"temp\":10.43,\"temp_min\":10.43,\"temp_max\":10.43,\"pressure\":1021.83,\"sea_level\":1029.43,\"grnd_level\":1021.83,\"humidity\":80,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":8.06,\"deg\":220.502},\"rain\":{\"3h\":0.13},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-06 15:00:00\"},{\"dt\":1512583200,\"main\":{\"temp\":10.62,\"temp_min\":10.62,\"temp_max\":10.62,\"pressure\":1017.83,\"sea_level\":1025.43,\"grnd_level\":1017.83,\"humidity\":78,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":8.56,\"deg\":214.501},\"rain\":{\"3h\":0.08},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 18:00:00\"},{\"dt\":1512594000,\"main\":{\"temp\":10.81,\"temp_min\":10.81,\"temp_max\":10.81,\"pressure\":1013.88,\"sea_level\":1021.44,\"grnd_level\":1013.88,\"humidity\":85,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":9.41,\"deg\":214.506},\"rain\":{\"3h\":0.69},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-06 21:00:00\"},{\"dt\":1512604800,\"main\":{\"temp\":11.15,\"temp_min\":11.15,\"temp_max\":11.15,\"pressure\":1009.41,\"sea_level\":1016.88,\"grnd_level\":1009.41,\"humidity\":93,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":9.72,\"deg\":216.001},\"rain\":{\"3h\":1.42},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 00:00:00\"},{\"dt\":1512615600,\"main\":{\"temp\":11.99,\"temp_min\":11.99,\"temp_max\":11.99,\"pressure\":1004.15,\"sea_level\":1011.55,\"grnd_level\":1004.15,\"humidity\":94,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":9.71,\"deg\":219.004},\"rain\":{\"3h\":1.38},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 03:00:00\"},{\"dt\":1512626400,\"main\":{\"temp\":12.42,\"temp_min\":12.42,\"temp_max\":12.42,\"pressure\":999.78,\"sea_level\":1007.52,\"grnd_level\":999.78,\"humidity\":97,\"temp_kf\":0},\"weather\":[{\"id\":501,\"main\":\"Rain\",\"description\":\"moderate rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":8.82,\"deg\":233.5},\"rain\":{\"3h\":5.77},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 06:00:00\"},{\"dt\":1512637200,\"main\":{\"temp\":5.61,\"temp_min\":5.61,\"temp_max\":5.61,\"pressure\":1003.48,\"sea_level\":1010.98,\"grnd_level\":1003.48,\"humidity\":98,\"temp_kf\":0},\"weather\":[{\"id\":501,\"main\":\"Rain\",\"description\":\"moderate rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":44},\"wind\":{\"speed\":6.9,\"deg\":312.005},\"rain\":{\"3h\":5.12},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-07 09:00:00\"},{\"dt\":1512648000,\"main\":{\"temp\":5.73,\"temp_min\":5.73,\"temp_max\":5.73,\"pressure\":1004.44,\"sea_level\":1011.99,\"grnd_level\":1004.44,\"humidity\":94,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03d\"}],\"clouds\":{\"all\":48},\"wind\":{\"speed\":7.55,\"deg\":289.504},\"rain\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-07 12:00:00\"},{\"dt\":1512658800,\"main\":{\"temp\":4.13,\"temp_min\":4.13,\"temp_max\":4.13,\"pressure\":1005.3,\"sea_level\":1013.07,\"grnd_level\":1005.3,\"humidity\":100,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":92},\"wind\":{\"speed\":6.88,\"deg\":295.002},\"rain\":{\"3h\":0.84},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-07 15:00:00\"},{\"dt\":1512669600,\"main\":{\"temp\":3.62,\"temp_min\":3.62,\"temp_max\":3.62,\"pressure\":1009.79,\"sea_level\":1017.53,\"grnd_level\":1009.79,\"humidity\":98,\"temp_kf\":0},\"weather\":[{\"id\":501,\"main\":\"Rain\",\"description\":\"moderate rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":56},\"wind\":{\"speed\":7.44,\"deg\":341.002},\"rain\":{\"3h\":3.46},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 18:00:00\"},{\"dt\":1512680400,\"main\":{\"temp\":0.54,\"temp_min\":0.54,\"temp_max\":0.54,\"pressure\":1014,\"sea_level\":1021.74,\"grnd_level\":1014,\"humidity\":97,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"02n\"}],\"clouds\":{\"all\":8},\"wind\":{\"speed\":5.38,\"deg\":317.5},\"rain\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-07 21:00:00\"},{\"dt\":1512691200,\"main\":{\"temp\":0.52,\"temp_min\":0.52,\"temp_max\":0.52,\"pressure\":1015.01,\"sea_level\":1022.76,\"grnd_level\":1015.01,\"humidity\":97,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"02n\"}],\"clouds\":{\"all\":8},\"wind\":{\"speed\":5.51,\"deg\":284.003},\"rain\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 00:00:00\"},{\"dt\":1512702000,\"main\":{\"temp\":1.57,\"temp_min\":1.57,\"temp_max\":1.57,\"pressure\":1014.55,\"sea_level\":1022.37,\"grnd_level\":1014.55,\"humidity\":99,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":88},\"wind\":{\"speed\":6.53,\"deg\":295.003},\"rain\":{\"3h\":0.010000000000002},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 03:00:00\"},{\"dt\":1512712800,\"main\":{\"temp\":1.23,\"temp_min\":1.23,\"temp_max\":1.23,\"pressure\":1014.82,\"sea_level\":1022.68,\"grnd_level\":1014.82,\"humidity\":97,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10n\"}],\"clouds\":{\"all\":76},\"wind\":{\"speed\":6.46,\"deg\":309.01},\"rain\":{\"3h\":0.009999999999998},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 06:00:00\"},{\"dt\":1512723600,\"main\":{\"temp\":1.65,\"temp_min\":1.65,\"temp_max\":1.65,\"pressure\":1016.58,\"sea_level\":1024.37,\"grnd_level\":1016.58,\"humidity\":99,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":80},\"wind\":{\"speed\":7.09,\"deg\":326},\"rain\":{\"3h\":0.21},\"snow\":{\"3h\":0.02},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-08 09:00:00\"},{\"dt\":1512734400,\"main\":{\"temp\":2.04,\"temp_min\":2.04,\"temp_max\":2.04,\"pressure\":1018.31,\"sea_level\":1026.08,\"grnd_level\":1018.31,\"humidity\":94,\"temp_kf\":0},\"weather\":[{\"id\":500,\"main\":\"Rain\",\"description\":\"light rain\",\"icon\":\"10d\"}],\"clouds\":{\"all\":8},\"wind\":{\"speed\":7.11,\"deg\":334.505},\"rain\":{\"3h\":0.010000000000002},\"snow\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-08 12:00:00\"},{\"dt\":1512745200,\"main\":{\"temp\":0.9,\"temp_min\":0.9,\"temp_max\":0.9,\"pressure\":1019.72,\"sea_level\":1027.58,\"grnd_level\":1019.72,\"humidity\":85,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01d\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":6.33,\"deg\":334.001},\"rain\":{},\"snow\":{},\"sys\":{\"pod\":\"d\"},\"dt_txt\":\"2017-12-08 15:00:00\"},{\"dt\":1512756000,\"main\":{\"temp\":-0.4,\"temp_min\":-0.4,\"temp_max\":-0.4,\"pressure\":1021.05,\"sea_level\":1029.02,\"grnd_level\":1021.05,\"humidity\":85,\"temp_kf\":0},\"weather\":[{\"id\":800,\"main\":\"Clear\",\"description\":\"clear sky\",\"icon\":\"01n\"}],\"clouds\":{\"all\":0},\"wind\":{\"speed\":4.97,\"deg\":328.5},\"rain\":{},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 18:00:00\"},{\"dt\":1512766800,\"main\":{\"temp\":-0.74,\"temp_min\":-0.74,\"temp_max\":-0.74,\"pressure\":1022.18,\"sea_level\":1030.21,\"grnd_level\":1022.18,\"humidity\":88,\"temp_kf\":0},\"weather\":[{\"id\":802,\"main\":\"Clouds\",\"description\":\"scattered clouds\",\"icon\":\"03n\"}],\"clouds\":{\"all\":32},\"wind\":{\"speed\":4.26,\"deg\":326.503},\"rain\":{},\"snow\":{},\"sys\":{\"pod\":\"n\"},\"dt_txt\":\"2017-12-08 21:00:00\"}],\"city\":{\"id\":2643743,\"name\":\"London\",\"coord\":{\"lat\":51.5085,\"lon\":-0.1258},\"country\":\"GB\"}}";


	private BufferedReader in;
	private WeatherRequest tallinnRequest;
	private WeatherRequest tartuRequest;
	private WeatherRequest londonRequest;
	private CurrentWeatherRepository currentWeatherRepository;
	private ForecastRepository forecastRepository;

	@Before
	public void setup() {
		in = mock(BufferedReader.class);
		currentWeatherRepository = mock(CurrentWeatherRepository.class);
		forecastRepository = mock(ForecastRepository.class);

		tallinnRequest = mock(WeatherRequest.class);
		tartuRequest = mock(WeatherRequest.class);
		londonRequest = mock(WeatherRequest.class);

		when(tallinnRequest.getCurrentWeatherRequest()).thenReturn(TALLINN_CURRENT_WEATHER_RESPONSE);
		when(tallinnRequest.getForecastRequest()).thenReturn(TALLINN_FORECAST_RESPONSE);
		when(tartuRequest.getCurrentWeatherRequest()).thenReturn(TARTU_CURRENT_WEATHER_RESPONSE);
		when(tartuRequest.getForecastRequest()).thenReturn(TARTU_FORECAST_RESPONSE);
		when(londonRequest.getCurrentWeatherRequest()).thenReturn(LONDON_CURRENT_WEATHER_RESPONSE);
		when(londonRequest.getForecastRequest()).thenReturn(LONDON_FORECAST_RESPONSE);
	}

	@Test
	public void testOneLineRead() throws IOException {
		when(in.readLine()).thenReturn("Tallinn");

		assertEquals("Tallinn", in.readLine());
	}

	@Test
	public void testMultipleLinesRead() throws IOException {
		when(in.readLine()).thenReturn("Tallinn", "Tartu", "London");

		assertEquals("Tallinn", in.readLine());
		assertEquals("Tartu", in.readLine());
		assertEquals("London", in.readLine());
	}

	@Test
	public void testIllegalCity() {
		WeatherRequest request = new WeatherRequest("Abcde", "EE", "metric");

		when(currentWeatherRepository.getCurrentWeather(request)).thenThrow(ParseException.class);
		when(forecastRepository.getForecast(request)).thenThrow(ParseException.class);

		assertThrows(ParseException.class, () -> currentWeatherRepository.getCurrentWeather(request));
		assertThrows(ParseException.class, () -> forecastRepository.getForecast(request));
	}

	@Test
	public void testIllegalCountry() {
		WeatherRequest request = new WeatherRequest("Tallinn", "ZZ", "metric");

		when(currentWeatherRepository.getCurrentWeather(request)).thenThrow(ParseException.class);
		when(forecastRepository.getForecast(request)).thenThrow(ParseException.class);

		assertThrows(ParseException.class, () -> currentWeatherRepository.getCurrentWeather(request));
		assertThrows(ParseException.class, () -> forecastRepository.getForecast(request));
	}

	@Test
	public void testEmptyRequest() {
		WeatherRequest request = new WeatherRequest(null, null, null);

		when(currentWeatherRepository.getCurrentWeather(request)).thenThrow(ParseException.class);
		when(forecastRepository.getForecast(request)).thenThrow(ParseException.class);

		assertThrows(ParseException.class, () -> currentWeatherRepository.getCurrentWeather(request));
		assertThrows(ParseException.class, () -> forecastRepository.getForecast(request));
	}

	@Test
	public void testTallinnReportFileWrite() throws IOException {
		generateReport(tallinnRequest);
		assertFileEquals("Tallinn.txt", "TallinnRight.txt");
	}

	@Test
	public void testTartuReportFileWrite() throws IOException {
		generateReport(tartuRequest);
		assertFileEquals("Tartu.txt", "TartuRight.txt");
	}

	@Test
	public void testLondonReportFileWrite() throws IOException {
		generateReport(londonRequest);
		assertFileEquals("London.txt", "LondonRight.txt");
	}

	private void generateReport(WeatherRequest request) throws IOException {
		CurrentWeatherRepository currentWeatherRepository = new CurrentWeatherRepository();
		ForecastRepository forecastRepository = new ForecastRepository();

		CurrentWeatherReport currentWeatherReport = currentWeatherRepository.getCurrentWeather(request);
		ForecastReport forecastReport = forecastRepository.getForecast(request);

		FileReadWrite fileReadWrite = new FileReadWrite();
		fileReadWrite.writeToFile(currentWeatherReport, forecastReport);
	}

	private void assertFileEquals(String file1, String file2) throws IOException {
		try (FileInputStream in1 = new FileInputStream(file1);
			 FileInputStream in2 = new FileInputStream(file2)) {

			while (true) {
				int b1 = in1.read();
				int b2 = in2.read();

				if (b1 == -1 && b2 == -1) {
					break;
				} else if (b2 == -1) {
					fail("File " + file1 + " is smaller than should be");
				} else if (b1 == -1) {
					fail("File " + file1 + " is bigger than should be");
				} else if (b1 != b2) {
					fail("Files are different");
				}
			}
		}
	}
}
